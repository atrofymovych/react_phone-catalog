(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var a,s=c(20),n=c.n(s),r=c(6),o=(c(30),c(1)),i=c.n(o),l=c(4),_=(c(31),c(7)),d=c.n(_),u=(c(32),c(9)),b=c(11),j=c(3),m=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},p=function(e,t){localStorage.setItem(e,JSON.stringify(t))};!function(e){e.age="Newest",e.price="Cheapest",e.name="Alphabetical"}(a||(a={}));var h=c(0),O={cart:[],favorite:[],setCart:function(){},setFavorite:function(){},selectedId:void 0,setSelectedId:function(){},addToCart:function(){},isAdded:!1,addToFavorite:function(){},handleQueryChange:function(){},query:"",setQuery:function(){},sort:"",setSort:function(){},itemsPerPage:4,setItemsPerPage:function(){},currentPage:1,setCurrentPage:function(){}},x=i.a.createContext(O),v=function(e){var t=e.children,c=Object(o.useState)(m("cart")),s=Object(j.a)(c,2),n=s[0],r=s[1],i=Object(o.useState)(m("favorite")),l=Object(j.a)(i,2),_=l[0],d=l[1],O=Object(o.useState)(a.name),v=Object(j.a)(O,2),g=v[0],f=v[1],N=Object(o.useState)(4),y=Object(j.a)(N,2),k=y[0],P=y[1],w=Object(o.useState)(1),C=Object(j.a)(w,2),S=C[0],I=C[1],L=Object(o.useState)(void 0),E=Object(j.a)(L,2),T=E[0],B=E[1],A=Object(o.useState)(""),q=Object(j.a)(A,2),R=q[0],D=q[1];Object(o.useEffect)((function(){p("cart",n)}),[n]),Object(o.useEffect)((function(){p("favorite",_)}),[_]);var K=Object(o.useState)(!1),F=Object(j.a)(K,2),M=F[0],Q=F[1],H=Object(o.useRef)(null);return Object(h.jsx)(x.Provider,{value:{cart:n,favorite:_,setCart:r,setFavorite:d,selectedId:T,setSelectedId:B,addToCart:function(e,t){var c=Object(b.a)(Object(b.a)({},e),{},{quantity:1}),a=n.find((function(t){return t.id===e.id}));t.stopPropagation(),a&&(a.quantity+=1,p("cart",n)),a||(r((function(e){return[].concat(Object(u.a)(e),[c])})),p("cart",n)),Q(!0),H.current&&clearTimeout(H.current);var s=setTimeout((function(){Q(!1)}),1e3);H.current=s},isAdded:M,addToFavorite:function(e,t){t.stopPropagation(),_.some((function(t){return t.id===e.id}))?(d((function(t){return t.filter((function(t){return t.id!==e.id}))})),p("favorite",_)):(d((function(t){return[].concat(Object(u.a)(t),[e])})),p("favorite",_))},handleQueryChange:function(e){D(e.target.value)},query:R,setQuery:D,sort:g,setSort:f,itemsPerPage:k,setItemsPerPage:P,currentPage:S,setCurrentPage:I},children:t})},g=function(){var e=Object(o.useContext)(x),t=e.query,c=e.handleQueryChange,a=e.setQuery,s=Object(l.n)();Object(o.useEffect)((function(){a("")}),[s.pathname,a]);var n=function(){setTimeout((function(){window.location.reload()}),1)};return Object(h.jsxs)("header",{className:"header",children:[Object(h.jsxs)("div",{className:"header__aligned-left",children:[Object(h.jsx)(r.b,{to:"/",className:"header__logo logo"}),"/cart"===s.pathname?"":Object(h.jsxs)("nav",{className:"nav",children:[Object(h.jsx)(r.c,{to:"/",className:"nav__link uppercase-text",onClick:n,children:"HOME"}),Object(h.jsx)(r.c,{to:"/phones",className:"nav__link uppercase-text",onClick:n,children:"PHONES"}),Object(h.jsx)(r.c,{to:"/tablets",className:"nav__link uppercase-text",onClick:n,children:"TABLETS"}),Object(h.jsx)(r.c,{to:"/accessories",className:"nav__link uppercase-text",onClick:n,children:"ACCESSORIES"})]})]}),Object(h.jsxs)("div",{className:"header__aligned-right",children:[["/phones","/tablets","/accessories","/favorites"].includes(s.pathname)?Object(h.jsxs)("div",{className:"header__aligned-right__search",children:[Object(h.jsx)("input",{className:"header__aligned-right__search__text",spellCheck:"false",type:"text",placeholder:"Search in ".concat(s.pathname.replace(/\//g,""),"..."),value:t,onChange:c}),Object(h.jsx)("div",{className:"header__aligned-right__search__icon icon search"})]}):"","/cart"===s.pathname?"":Object(h.jsx)(r.c,{className:" header__aligned-right__box header__aligned-right__favorite ",to:"/favorites",onClick:n,children:Object(h.jsx)("div",{className:"header__aligned-right__favorite__icon icon favorite"})}),Object(h.jsx)(r.c,{className:d()(["header__aligned-right__box header__aligned-right__cart",{"header__aligned-right__cart__active":"/cart"===s.pathname}]),to:"/cart",onClick:n,children:Object(h.jsx)("div",{className:"header__aligned-right__cart__icon icon cart"})})]})]})},f=(c(35),function(){var e=Object(o.useState)(!1),t=Object(j.a)(e,2),c=t[0],a=t[1];Object(o.useEffect)((function(){var e=function(){var e=window.scrollY||document.documentElement.scrollTop;a(e>100)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var s=function(){window.scrollTo({top:0,behavior:"smooth"})};return Object(h.jsx)("footer",{className:"footer",children:Object(h.jsxs)("div",{className:"footer__block",children:[Object(h.jsx)("div",{className:"footer__aligned-left",children:Object(h.jsx)(r.b,{to:"/",className:"footer__logo logo icon"})}),Object(h.jsxs)("div",{className:"footer__aligned-center",children:[Object(h.jsx)(r.b,{to:"https://github.com/atrofymovych/react_phone-catalog",className:"footer__link footer__link--github bold",children:"GITHUB"}),Object(h.jsx)(r.b,{to:"/contacts",className:"footer__link footer__link--contacts bold",children:"CONTACTS"}),Object(h.jsx)(r.b,{to:"/rights",className:"footer__link footer__link--rights bold",children:"RIGHTS"})]}),c&&Object(h.jsxs)("div",{role:"button",tabIndex:0,className:"footer__aligned-right medium",onClick:s,onKeyDown:function(e){"Enter"!==e.key&&"Space"!==e.key||s()},children:["Back to top",Object(h.jsx)("div",{className:"footer__border-arrow",children:Object(h.jsx)("div",{className:"footer__arrow arrow arrow-up"})})]})]})})}),N=function(e){var t=e.product,c=e.carousel,a=Object(o.useContext)(x),s=a.cart,n=a.favorite,r=a.setCart,i=a.setSelectedId,_=a.addToFavorite,m=Object(o.useState)(n.some((function(e){return e.phoneId===t.phoneId}))),O=Object(j.a)(m,2),v=O[0],g=O[1],f=Object(o.useState)(!1),N=Object(j.a)(f,2),y=N[0],k=N[1],P=Object(o.useRef)(null),w=Object(l.p)(),C=function(e){i(e),w("/phones/".concat(e))};return Object(o.useEffect)((function(){g(n.some((function(e){return e.phoneId===t.phoneId})))}),[n]),Object(h.jsxs)("div",{className:"productCard",style:{transform:"translateX(".concat(c,"px)")},role:"link",tabIndex:0,onClick:function(){return C(t.phoneId)},onKeyDown:function(e){"Enter"!==e.key&&"Space"!==e.key||C(t.phoneId)},children:[Object(h.jsx)("div",{className:"productCard__image",children:Object(h.jsx)("img",{src:"https://mate-academy.github.io/react_phone-catalog/_new/".concat(t.image),alt:t.name,className:"productCard__image__img"})}),Object(h.jsx)("div",{className:"productCard__name primary",children:t.name}),Object(h.jsxs)("div",{className:" productCard__price bold primary ",children:["$".concat(t.price),Object(h.jsx)("span",{className:"productCard__price--discounted",children:"$".concat(t.fullPrice)})]}),Object(h.jsxs)("ul",{className:"productCard__specs__block",children:[Object(h.jsxs)("li",{className:"productCard__specs__block__item primary-color",children:[Object(h.jsx)("span",{children:"Screen"}),t.screen]}),Object(h.jsx)("li",{className:"productCard__specs__block__item primary-color",children:t.capacity&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Capacity"}),t.capacity]})}),Object(h.jsx)("li",{className:"productCard__specs__block__item primary-color",children:t.ram&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"RAM"}),t.ram]})})]}),Object(h.jsxs)("div",{className:"productCard__buttons",children:[Object(h.jsx)("button",{type:"button",className:d()("productCard__button medium",{productCard__button__added:y}),onClick:function(e){return function(e,t){var c=Object(b.a)(Object(b.a)({},e),{},{quantity:1}),a=s.find((function(t){return t.id===e.id}));t.stopPropagation(),a&&(a.quantity+=1,p("cart",s)),a||(r((function(e){return[].concat(Object(u.a)(e),[c])})),p("cart",s)),k(!0),P.current&&clearTimeout(P.current);var n=setTimeout((function(){k(!1)}),1e3);P.current=n}(t,e)},children:"Add to cart"}),Object(h.jsx)("button",{type:"button",className:"productCard__button__favorite",onClick:function(e){return _(t,e)},children:Object(h.jsx)("div",{className:d()("icon",{favoriteSelected:v,favorite:!v})})})]})]})};N.defaultProps={carousel:0};c(36);var y=function(){return Object(h.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(h.jsx)("div",{className:"Loader__content"})})},k=function(e){var t=e.products,c=e.name,a=e.isLoaded,s=Object(o.useState)(0),n=Object(j.a)(s,2),r=n[0],i=n[1],l=-288*(t.length-4);return a?Object(h.jsx)("div",{className:"productSlider",children:Object(h.jsxs)("div",{className:"productSlider__block",children:[Object(h.jsx)("div",{className:"productSlider__block--title bold",children:c}),Object(h.jsx)("div",{className:"productSlider__carousel",children:Object(h.jsx)(y,{})})]})}):Object(h.jsxs)("div",{className:"productSlider",children:[Object(h.jsxs)("div",{className:"productSlider__block",children:[Object(h.jsx)("div",{className:"productSlider__block--title bold",children:c}),Object(h.jsxs)("div",{className:"productSlider__block--buttons",children:[Object(h.jsx)("button",{type:"button",className:"productSlider__block--button",onClick:function(){return i(r+288)},disabled:0===r,children:Object(h.jsx)("div",{className:"arrow arrow-left",style:0===r?{backgroundImage:"url(".concat(".","/icons/ArrowLeftDisabled.svg)")}:{}})}),Object(h.jsx)("button",{type:"button",className:"productSlider__block--button",onClick:function(){return i(r-288)},disabled:r<=l,children:Object(h.jsx)("div",{className:"arrow arrow-right",style:r===l?{backgroundImage:"url(".concat(".","/icons/ArrowRightDisabled.svg)")}:{}})})]})]}),Object(h.jsx)("div",{className:"productSlider__carousel",children:t.map((function(e){return Object(h.jsx)(N,{"data-cy":"cardsContainer",product:e,carousel:r},e.id)}))})]})},P=function(){var e=Object(o.useState)(0),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(o.useRef)(null),n=function(){s.current&&clearTimeout(s.current)},i=function(){s.current=setTimeout((function(){a(0===c?2:c-1)}),5e3)};return Object(o.useEffect)((function(){return i(),function(){n()}}),[c]),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"slider",children:[Object(h.jsx)("button",{type:"button",className:"slider__button",onClick:function(){n(),a(2===c?0:c+1),i()},children:Object(h.jsx)("div",{className:"arrow arrow-left"})}),Object(h.jsxs)("ul",{className:"slider__carousel",children:[Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/accessories",className:d()("slider__slide slider__accessories ",{slider__slide__prev:0===c,slider__slide__current:1===c,slider__slide__next:2===c})})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/tablets",className:d()("slider__slide slider__tablets",{slider__slide__prev:1===c,slider__slide__current:2===c,slider__slide__next:0===c})})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/phones",className:d()("slider__slide slider__phones",{slider__slide__prev:2===c,slider__slide__current:0===c,slider__slide__next:1===c})})})]}),Object(h.jsx)("button",{type:"button",className:"slider__button",onClick:function(){n(),a(0===c?2:c-1),i()},children:Object(h.jsx)("div",{className:"arrow arrow-right"})}),Object(h.jsxs)("div",{className:"dot-container",children:[Object(h.jsx)("span",{className:d()("dot",{dot__active:0===c})}),Object(h.jsx)("span",{className:d()("dot",{dot__active:2===c})}),Object(h.jsx)("span",{className:d()("dot",{dot__active:1===c})})]})]})})},w=c(8),C=c(5),S=c.n(C),I="https://mate-academy.github.io/react_phone-catalog/_new";function L(e){return new Promise((function(t){return setTimeout(t,e)}))}function E(){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(S.a.mark((function e(){var t,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I,"/products.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.next=8,L(200);case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(S.a.mark((function e(t){var c,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(I,"/products/").concat(t,".json"));case 2:return c=e.sent,e.next=5,c.json();case 5:return a=e.sent,e.next=8,L(200);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(e){var t=e.phones,c=e.tablets,a=e.accessories;return Object(h.jsxs)("div",{className:"shopByCategory",children:[Object(h.jsx)("div",{className:"shopByCategory__title bold",children:"Shop by category"}),Object(h.jsxs)("div",{className:"shopByCategory__block",children:[Object(h.jsxs)(r.b,{className:"shopByCategory__block__phones",to:"/phones",children:[Object(h.jsx)("div",{className:" shopByCategory__block__phones__background shopByCategory__block__background",children:Object(h.jsx)("img",{src:"".concat(I,"/img/category-phones.png"),alt:"phones",className:"shopByCategory__block__phones__img"})}),Object(h.jsx)("div",{className:"shopByCategory__block__subtitle medium",children:"Mobile phones"}),Object(h.jsx)("div",{className:"shopByCategory__block__text medium",children:"".concat(t.length," models")})]}),Object(h.jsxs)(r.b,{className:"shopByCategory__block__tablets",to:"/tablets",children:[Object(h.jsx)("div",{className:" shopByCategory__block__tablets__background shopByCategory__block__background",children:Object(h.jsx)("img",{src:"".concat(I,"/img/category-tablets.png"),alt:"phones",className:"shopByCategory__block__tablets__img"})}),Object(h.jsx)("div",{className:"shopByCategory__block__subtitle medium",children:"Tablets"}),Object(h.jsx)("div",{className:"shopByCategory__block__text medium",children:"".concat(c.length," models")})]}),Object(h.jsxs)(r.b,{className:"shopByCategory__block__accessories",to:"/accessories",children:[Object(h.jsx)("div",{className:" shopByCategory__block__accessories__background shopByCategory__block__background",children:Object(h.jsx)("img",{src:"".concat(I,"/img/category-accessories.png"),alt:"phones",className:"shopByCategory__block__accessories__img"})}),Object(h.jsx)("div",{className:"shopByCategory__block__subtitle medium",children:"Accessories"}),Object(h.jsx)("div",{className:"shopByCategory__block__text medium",children:"".concat(a.length," models")})]})]})]})},R=function(){var e=Object(o.useState)([]),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(o.useState)([]),n=Object(j.a)(s,2),r=n[0],i=n[1],l=Object(o.useState)([]),_=Object(j.a)(l,2),d=_[0],u=_[1],b=Object(o.useState)([]),m=Object(j.a)(b,2),p=m[0],O=m[1],x=Object(o.useState)([]),v=Object(j.a)(x,2),g=v[0],f=v[1],N=Object(o.useState)(!1),y=Object(j.a)(N,2),w=y[0],C=y[1];return Object(o.useEffect)((function(){C(!0),E().then((function(e){C(!1);var t=e.sort((function(e,t){return(e.fullPrice-e.price)/e.fullPrice*100-(t.fullPrice-t.price)/t.fullPrice*100})).filter((function(e){return(e.fullPrice-e.price)/e.fullPrice*100>=6}));a(t);var c=e.filter((function(e){return e.year>=2019})).sort((function(e,t){return t.price-e.price}));i(c),u(e.filter((function(e){return"phones"===e.category}))),O(e.filter((function(e){return"tablets"===e.category}))),f(e.filter((function(e){return"accessories"===e.category})))}))}),[]),Object(h.jsxs)("div",{className:"page",children:[Object(h.jsx)(P,{}),Object(h.jsx)("div",{className:"HotPrices",children:Object(h.jsx)(k,{products:c,name:"Hot prices",isLoaded:w})}),Object(h.jsx)(q,{phones:d,tablets:p,accessories:g,"data-cy":"categoryLinksContainer"}),Object(h.jsx)("div",{className:"BrandNew",children:Object(h.jsx)(k,{products:r,name:"Brand new",isLoaded:w})})]})};var D=function(e){var t,c=e.setSort,s=e.itemsPerPage,n=e.setItemsPerPage,r=e.newPhones,i=e.pages,l=e.currentPage,_=e.setCurrentPage,u=e.products,b=e.sort,m=Object(o.useState)(!1),p=Object(j.a)(m,2),O=p[0],x=p[1],v=Object(o.useState)(!1),g=Object(j.a)(v,2),f=g[0],y=g[1],k=function(e,t){c(e),t(!1),_(1)},P=function(e){_(e)},w=function(e,t){n(e),t(!1),_(1)};return Object(h.jsxs)("div",{className:"pagination",children:[u.length>4&&Object(h.jsxs)("div",{className:"pagination__choose",children:[Object(h.jsxs)("div",{className:"pagination__choose__block",children:[Object(h.jsx)("div",{className:"pagination__choose__title",children:"Sort by"}),Object(h.jsxs)("div",{className:"pagination__choose__dropdown","data-cy":"paginationLeft",children:[Object(h.jsxs)("div",{className:"pagination__choose__dropdown__block",role:"button",tabIndex:0,"aria-label":"arrow-down",onClick:function(){return x(!O)},onKeyDown:function(){return x(!O)},children:[Object(h.jsx)("div",{className:"pagination__choose__dropdown__title",children:b}),O?Object(h.jsx)("div",{className:d()("pagination__choose__dropdown__button arrow arrow-down")}):Object(h.jsx)("div",{className:d()("pagination__choose__dropdown__button arrow arrow-up")})]}),Object(h.jsxs)("div",{className:d()("pagination__choose__dropdown__items",{visible:O}),children:[Object(h.jsx)("div",{role:"button","aria-label":"name",tabIndex:0,className:"pagination__choose__dropdown__item",onClick:function(){return k(a.name,x)},onKeyDown:function(){return k(a.name,x)},children:a.name}),Object(h.jsx)("div",{role:"button","aria-label":"price",tabIndex:0,className:"pagination__choose__dropdown__item",onClick:function(){return k(a.price,x)},onKeyDown:function(){return k(a.price,x)},children:a.price}),Object(h.jsx)("div",{role:"button","aria-label":"year",tabIndex:0,className:"pagination__choose__dropdown__item",onClick:function(){return k(a.age,x)},onKeyDown:function(){return k(a.age,x)},children:a.age})]})]})]}),Object(h.jsxs)("div",{className:"pagination__choose__block","data-cy":"paginationRight",children:[Object(h.jsx)("div",{className:"pagination__choose__title",children:"Items Per Page"}),Object(h.jsxs)("div",{className:"pagination__choose__dropdown",children:[Object(h.jsxs)("div",{className:"pagination__choose__dropdown__block",role:"button",tabIndex:0,"aria-label":"arrow-down",onClick:function(){return y(!f)},onKeyDown:function(){return y(!f)},children:[Object(h.jsx)("div",{className:"pagination__choose__dropdown__title",children:s===u.length?"all":s}),f?Object(h.jsx)("div",{className:d()("pagination__choose__dropdown__button arrow arrow-down")}):Object(h.jsx)("div",{className:d()("pagination__choose__dropdown__button arrow arrow-up")})]}),Object(h.jsxs)("div",{className:d()("pagination__choose__dropdown__items",{visible:f}),children:[Object(h.jsx)("div",{role:"button",tabIndex:0,"aria-label":"4",className:"pagination__choose__dropdown__item",onClick:function(){return w(4,y)},onKeyDown:function(){return w(4,y)},children:"4"}),Object(h.jsx)("div",{role:"button",tabIndex:0,"aria-label":"8",className:"pagination__choose__dropdown__item",onClick:function(){return w(8,y)},onKeyDown:function(){return w(8,y)},children:"8"}),Object(h.jsx)("div",{role:"button",tabIndex:0,"aria-label":"16",className:"pagination__choose__dropdown__item",onClick:function(){return w(16,y)},onKeyDown:function(){return w(16,y)},children:"16"}),Object(h.jsx)("div",{role:"button","aria-label":"all",tabIndex:0,className:"pagination__choose__dropdown__item",onClick:function(){return w(u.length,y)},onKeyDown:function(){return w(u.length,y)},children:"all"})]})]})]})]}),Object(h.jsxs)("div",{className:"pagination__list",children:[Object(h.jsx)("div",{className:"pagination__list__items",children:Object(h.jsx)("div",{className:"grid-container",children:r.map((function(e){return Object(h.jsx)(N,{product:e,"data-cy":"cardsContainer"},e.id)}))})}),i>1&&Object(h.jsxs)("div",{className:"pagination__pageList",children:[Object(h.jsx)("button",{type:"button",className:d()("pagination__pageList__item pagination__pageList__item__button",{"pagination__pageList__item--disabled":1===l}),onClick:function(){return P(l-1)},disabled:1===l,children:Object(h.jsx)("div",{className:d()("arrow arrow-left",{"arrow-left--disabled":1===l})})}),(t=i,Array.from({length:t},(function(e,t){return t+1}))).map((function(e){return Object(h.jsx)("div",{role:"button",tabIndex:0,"aria-label":"page-".concat(e),className:d()("pagination__pageList__item",{"pagination__pageList__item--active":e===l}),onClick:function(){return P(e)},onKeyDown:function(){return P(e)},children:e},e)})),Object(h.jsx)("button",{type:"button",className:d()("pagination__pageList__item pagination__pageList__item__button",{"pagination__pageList__item--disabled":l===i}),onClick:function(){return P(l+1)},disabled:l===i,children:Object(h.jsx)("div",{className:d()("arrow arrow-right",{"arrow-right--disabled":l===i})})})]})]})]})},K=function(e){var t=e.title,c=e.navTitle,s=e.type,n=Object(o.useContext)(x),i=n.sort,_=n.setSort,d=n.itemsPerPage,b=n.setItemsPerPage,m=n.currentPage,p=n.setCurrentPage,O=n.query,v=n.setQuery,g=Object(o.useState)([]),f=Object(j.a)(g,2),N=f[0],k=f[1],P=Object(o.useState)(""),w=Object(j.a)(P,2),C=w[0],S=w[1],I=Object(o.useState)(!0),L=Object(j.a)(I,2),T=L[0],B=L[1],A=Object(o.useState)([]),q=Object(j.a)(A,2),R=q[0],K=q[1],F=Object(o.useState)([]),M=Object(j.a)(F,2),Q=M[0],H=M[1],$=Object(o.useState)(0),U=Object(j.a)($,2),J=U[0],G=U[1],Y=1===m?0:d*(m-1),z=d*m,X=Object(o.useRef)(!0),Z=Object(l.n)();return Object(o.useEffect)((function(){var e=function(e,t){switch(t){case a.name:return Object(u.a)(e).sort((function(e,t){return e.name.localeCompare(t.name)}));case a.price:return Object(u.a)(e).sort((function(e,t){return e.price-t.price}));case a.age:return Object(u.a)(e).sort((function(e,t){return t.year-e.year}));default:return Object(u.a)(e)}}(N,i);K(e)}),[i,d,N]),Object(o.useEffect)((function(){var e=R.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())})),t=setTimeout((function(){var t=R.filter((function(e){return e.name.toLowerCase().includes(O.toLowerCase())})).slice(Y,z);if(H(t),O){var c=e.length/d;G(c)}else{var a=R.length/d;G(a)}}),500);return function(){return clearTimeout(t)}}),[R,O,Y,z,d,N]),Object(o.useEffect)((function(){B(!0),E().then((function(e){B(!1);var t=e.filter((function(e){return e.category===s}));0===t.length?S("No ".concat(s," products available.")):(k(t),S(""))})).catch((function(){S("There is no connection to the server.")}))}),[s]),Object(o.useEffect)((function(){var e=new URLSearchParams(Z.search),t=parseInt(e.get("itemsPerPage")||"0",10),c=e.get("sort")||"Alphabetical",a=parseInt(e.get("currentPage")||"1",10),s=e.get("query")||"";b(t||d),_(c||i),p(a||m),v(s||O)}),[]),Object(o.useEffect)((function(){if(!X.current){var e=new URLSearchParams;e.set("itemsPerPage",String(d)),e.set("sort",i),e.set("currentPage",String(m)),e.set("query",O);var t="http://localhost:3000/#/phones?".concat(e.toString());window.history.replaceState(null,"",t)}X.current=!1}),[d,i,m,O]),T?Object(h.jsx)(y,{}):C?Object(h.jsx)("div",{className:"productsPage",children:Object(h.jsx)("div",{className:"productsPage__error bold",children:C})}):Object(h.jsxs)("div",{className:"productsPage",children:[Object(h.jsxs)("div",{className:"productsPage__nav",children:[Object(h.jsx)(r.b,{to:"/",className:"productsPage__nav__home"}),Object(h.jsx)("div",{className:"arrow arrow-right"}),Object(h.jsx)("div",{className:"productsPage__nav__title",children:c})]}),Object(h.jsx)("div",{className:"productsPage__title bold",children:t}),Object(h.jsx)("div",{className:"productsPage__subtitle body-text",children:O?"".concat(R.length," ").concat(1===R.length?"result":"results"):"".concat(R.length," ").concat(1===R.length?"model":"models")}),Object(h.jsx)(D,{setSort:_,itemsPerPage:d,setItemsPerPage:b,newPhones:Q,pages:Math.ceil(J),currentPage:m,setCurrentPage:p,products:N,sort:i})]})},F=function(e){var t=e.itemName,c=e.count,a=e.id,s=e.phoneId,n=Object(o.useContext)(x),r=n.cart,i=n.setCart,_=n.setSelectedId,d=Object(l.p)(),u=r.find((function(e){return e.name===t})),j=function(e){i(r.filter((function(t){return t.id!==e})))},m=function(e){_(e),d("/phones/".concat(e))};return Object(h.jsxs)("div",{className:"cartItem",children:[Object(h.jsx)("button",{type:"button","aria-label":"delete",className:"cartItem__delete",onClick:function(){return j(a)}}),Object(h.jsx)("div",{className:"cartItem__image",children:Object(h.jsx)("img",{src:"https://mate-academy.github.io/react_phone-catalog/_new/".concat(null===u||void 0===u?void 0:u.image),alt:t,className:"cartItem__img"})}),Object(h.jsx)("div",{className:"cartItem__name cartItem__name--normal",role:"button",tabIndex:0,onClick:function(){return m(s)},onKeyDown:function(e){"Enter"!==e.key&&"Space"!==e.key||m(s)},children:t}),Object(h.jsxs)("div",{className:"cartItem__count",children:[Object(h.jsx)("button",{className:"cartItem__count__box cartItem__count__minus",type:"button","aria-label":"minus",onClick:function(){return function(e){if(1===c)j(a);else{var t=r.map((function(t){return t.id===a?Object(b.a)(Object(b.a)({},t),{},{quantity:e-1}):t}));i(t),p("cart",t)}}(c)},children:Object(h.jsx)("div",{className:"cartItem__count__minusImg"})}),Object(h.jsx)("div",{className:"cartItem__count__box cartItem__count__number",children:c}),Object(h.jsx)("button",{className:"cartItem__count__box cartItem__count__plus",type:"button","aria-label":"plus",onClick:function(){return function(e){var t=r.map((function(t){return t.id===a?Object(b.a)(Object(b.a)({},t),{},{quantity:e+1}):t}));i(t),p("cart",t)}(c)},children:Object(h.jsx)("div",{className:"cartItem__count__plusImg"})})]}),Object(h.jsx)("div",{className:"cartItem__price cartItem__price--bold",children:"$".concat(null===u||void 0===u?void 0:u.price)})]},t)},M=function(){var e=Object(o.useContext)(x),t=e.cart,c=e.setCart,a=t.reduce((function(e,t){return e+t.price*t.quantity}),0),s=t.reduce((function(e,t){return e+t.quantity}),0),n=Object(l.p)(),r=function(){n(-1)};return Object(h.jsxs)("div",{className:"cartPage",children:[Object(h.jsxs)("div",{className:"cartPage__top",children:[Object(h.jsxs)("div",{className:"cartPage__top__back",role:"button",tabIndex:0,onClick:r,onKeyDown:function(e){"Enter"!==e.key&&"Space"!==e.key||r()},children:[Object(h.jsx)("div",{className:"arrow arrow-left--disabled"}),Object(h.jsx)("div",{className:"cartPage__top__back__text",children:"Back"})]}),Object(h.jsx)("div",{className:"cartPage__top__title bold",children:"Cart"})]}),t.length>0?Object(h.jsxs)("div",{className:"cartPage__bottom",children:[Object(h.jsx)("div",{className:"cartPage__bottom__list",children:t.map((function(e){return Object(h.jsx)(F,{itemName:e.name,count:e.quantity,id:e.id,phoneId:e.phoneId},e.id)}))}),Object(h.jsx)("div",{className:"cartPage__bottom__checkout",children:Object(h.jsxs)("div",{className:"cartPage__bottom__checkout__block",children:[Object(h.jsx)("div",{className:"cartPage__bottom__checkout__block__sum bold",children:"$".concat(a)}),Object(h.jsx)("div",{className:"cartPage__bottom__checkout__block__total",children:"Total for ".concat(s,1===s?" item":" items")}),Object(h.jsx)("div",{className:"cartPage__bottom__checkout__block__border"}),Object(h.jsx)("button",{type:"submit",className:"cartPage__bottom__checkout__block__button medium",onClick:function(){c([]),p("cart",t)},children:"Checkout"})]})})]}):Object(h.jsx)("div",{className:"cartPage__bottom__empty",children:"The cart is empty."})]})},Q=function(){var e=Object(o.useContext)(x),t=e.favorite,c=e.query,a=e.setQuery,s=Object(o.useMemo)((function(){return t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())}))}),[c]),n=Object(o.useRef)(!0),i=Object(l.n)();return Object(o.useEffect)((function(){if(!n.current){var e=new URLSearchParams;e.set("query",c);var t="http://localhost:3000/#/favorites?".concat(e.toString());window.history.replaceState(null,"",t)}n.current=!1}),[c]),Object(o.useEffect)((function(){var e=new URLSearchParams(i.search).get("query")||"";a(e||c)}),[]),Object(h.jsxs)("div",{className:"favoritePage",children:[Object(h.jsxs)("div",{className:"favoritePage__nav",children:[Object(h.jsx)(r.b,{to:"/",className:"favoritePage__nav__home"}),Object(h.jsx)("div",{className:"arrow arrow-right"}),Object(h.jsx)("div",{className:"favoritePage__nav__title",children:"Favorites"})]}),Object(h.jsx)("div",{className:"favoritePage__title bold",children:"Favorites"}),s.length>0?Object(h.jsx)("div",{className:"favoritePage__subtitle body-text",children:"".concat(t.length," items")}):Object(h.jsx)("div",{className:"favoritePage__subtitle body-text",children:"No items found."}),Object(h.jsx)("div",{className:"favoritePage__list",children:Object(h.jsx)("div",{className:"grid-container",children:s.map((function(e){return Object(h.jsx)(N,{product:e,"data-cy":"cardsContainer"})}))})})]})},H=(c(37),function(){return Object(h.jsx)("div",{className:"SmallLoader","data-cy":"loader",children:Object(h.jsx)("div",{className:"SmallLoader__content"})})}),$=function(){var e=Object(o.useContext)(x),t=e.cart,c=e.favorite,a=e.setCart,s=e.setFavorite,n=e.addToFavorite,i=Object(o.useState)(),_=Object(j.a)(i,2),O=_[0],v=_[1],g=Object(o.useState)([]),f=Object(j.a)(g,2),N=f[0],P=f[1],C=Object(o.useState)([]),I=Object(j.a)(C,2),L=I[0],T=I[1],A=Object(o.useState)(""),q=Object(j.a)(A,2),R=q[0],D=q[1],K=Object(o.useState)(!0),F=Object(j.a)(K,2),M=F[0],Q=F[1],$=Object(o.useState)(!1),U=Object(j.a)($,2),J=U[0],G=U[1],Y=Object(o.useState)(!0),z=Object(j.a)(Y,2),X=z[0],Z=z[1],V=Object(o.useState)(""),W=Object(j.a)(V,2),ee=W[0],te=W[1],ce=Object(l.p)(),ae=Object(l.r)().productId,se=function(e){return e.find((function(e){return e.phoneId===ae}))||null};Object(o.useEffect)((function(){var e=m("cart"),t=m("favorite");a(e),s(t)}),[]),Object(o.useEffect)((function(){p("cart",t)}),[t]),Object(o.useEffect)((function(){p("favorite",c)}),[c]),Object(o.useEffect)((function(){G(c.some((function(e){return e.phoneId===ae})))}),[c]);var ne=Object(o.useState)(!1),re=Object(j.a)(ne,2),oe=re[0],ie=re[1],le=Object(o.useRef)(null);Object(o.useEffect)((function(){var e=function(){var e=Object(w.a)(S.a.mark((function e(t){var c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!1),e.prev=1,e.next=4,B(t);case 4:c=e.sent,v(c),D(c.images[0]),Z(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),te("Error fetching ".concat(ae," details")),Z(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();ae?e(ae):ce("/")}),[ae,ce]),Object(o.useEffect)((function(){Q(!0),E().then((function(e){Q(!1),P(e);var t=e.sort((function(){return Math.random()-.5})).slice(0,8);T(t)}))}),[ae]);var _e=function(){ce(-1)},de=function(e){D(e)};return ee?Object(h.jsx)("div",{className:"productsPage",children:Object(h.jsx)("div",{className:"productsPage__error bold",children:ee})}):Object(h.jsxs)("div",{className:"productPage",children:[Object(h.jsxs)("div",{className:"productPage__nav",children:[Object(h.jsx)(r.b,{to:"/",className:"productPage__nav__home"}),Object(h.jsx)("div",{className:"arrow arrow-right"}),Object(h.jsx)(r.b,{to:"/phones",className:"productPage__nav__subtitle",children:"Phones"}),Object(h.jsx)("div",{className:"arrow arrow-right"}),X?Object(h.jsx)("div",{className:"productPage__nav__title",children:null===O||void 0===O?void 0:O.name}):Object(h.jsx)("div",{className:"productPage__nav__title",children:Object(h.jsx)(H,{})})]}),Object(h.jsxs)("div",{className:"productPage__back",children:[Object(h.jsx)("div",{className:"arrow arrow-left--disabled arrow-left--hovered"}),Object(h.jsx)("div",{className:"productPage__back__text",role:"button",tabIndex:0,onClick:_e,onKeyDown:function(e){"Enter"!==e.key&&"Space"!==e.key||_e()},children:"Back"})]}),X&&O?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"productPage__title h1 primary-color",children:null===O||void 0===O?void 0:O.name}),Object(h.jsx)("div",{className:"productPage__details",children:Object(h.jsxs)("div",{className:"grid-container",children:[Object(h.jsx)("div",{className:"productPage__details__photos",children:null===O||void 0===O?void 0:O.images.map((function(e){return Object(h.jsx)("div",{className:d()("productPage__details__photos__image",{productPage__details__photos__image__selected:R===e}),role:"button",tabIndex:0,onClick:function(){return de(e)},onKeyDown:function(t){"Enter"!==t.key&&"Space"!==t.key||de(e)},children:Object(h.jsx)("img",{src:"https://mate-academy.github.io/react_phone-catalog/_new/".concat(e),alt:"img",className:"productPage__details__photos__img"})},e)}))}),Object(h.jsx)("div",{className:"productPage__details__selectedImage",children:Object(h.jsx)("img",{src:"".concat("https://mate-academy.github.io/react_phone-catalog/_new/").concat(R),alt:"selected-img",className:"productPage__details__selectedImg"})}),Object(h.jsxs)("div",{className:"productPage__details__specs",children:[Object(h.jsxs)("div",{className:"productPage__details__specs__colors",children:[Object(h.jsx)("div",{className:" productPage__details__specs__colors__text small-text",children:"Avaliable colors"}),Object(h.jsx)("div",{className:"productPage__details__specs__colors__block",children:null===O||void 0===O?void 0:O.colorsAvailable.map((function(e){return Object(h.jsx)("button",{type:"button",className:d()("productPage__details__specs__colors__block__button",{productPage__details__specs__colors__block__button__active:"".concat(O.namespaceId,"-").concat(O.capacity.toLowerCase(),"-").concat(e)===ae}),onClick:function(){return function(e){var t="/phones/".concat(null===O||void 0===O?void 0:O.namespaceId,"-").concat(null===O||void 0===O?void 0:O.capacity.toLowerCase(),"-").concat(e.toLowerCase());ce(t)}(e)},children:Object(h.jsx)("div",{className:"productPage__details__specs__colors__block__color ".concat(e)})})}))})]}),Object(h.jsxs)("div",{className:"productPage__details__specs__capacity",children:[Object(h.jsx)("div",{className:" productPage__details__specs__capacity__text small-text",children:"Avaliable capacity"}),Object(h.jsx)("div",{className:"productPage__details__specs__capacity__block",children:null===O||void 0===O?void 0:O.capacityAvailable.map((function(e){return Object(h.jsx)("button",{type:"button",className:d()("productPage__details__specs__capacity__block__button",{productPage__details__specs__capacity__block__button__active:"".concat(O.namespaceId,"-").concat(e.toLowerCase(),"-").concat(O.color===ae)}),onClick:function(){return function(e){var t="/phones/".concat(null===O||void 0===O?void 0:O.namespaceId,"-").concat(e.toLowerCase(),"-").concat(null===O||void 0===O?void 0:O.color.toLowerCase());ce(t)}(e)},children:Object(h.jsx)("div",{className:" productPage__details__specs__capacity__block__text buttons-text normal",children:e})})}))})]}),Object(h.jsxs)("div",{className:"productPage__details__specs__price",children:[Object(h.jsx)("span",{className:"productPage__details__specs__price__discounted h1 bold primary-color",children:"$".concat(null===O||void 0===O?void 0:O.priceDiscount)}),Object(h.jsx)("span",{className:"productPage__details__specs__price__regular",children:"$".concat(null===O||void 0===O?void 0:O.priceRegular)})]}),Object(h.jsxs)("div",{className:"productPage__details__specs__buttons",children:[Object(h.jsx)("button",{type:"button",className:d()("productPage__details__specs__buttons__cart",{productPage__details__specs__buttons__cart__added:oe}),onClick:function(e){var c=se(N);c&&function(e,c){var s=Object(b.a)(Object(b.a)({},e),{},{quantity:1}),n=t.find((function(t){return t.id===e.id}));c.stopPropagation(),n&&(n.quantity+=1,p("cart",t)),n||(a((function(e){return[].concat(Object(u.a)(e),[s])})),p("cart",t)),ie(!0),le.current&&clearTimeout(le.current);var r=setTimeout((function(){ie(!1)}),1e3);le.current=r}(c,e)},children:Object(h.jsx)("div",{className:" productPage__details__specs__buttons__cart__text buttons-text medium",children:"Add to cart"})}),Object(h.jsx)("button",{type:"button",className:"productPage__details__specs__buttons__favorite",onClick:function(e){var t=se(N);t&&n(t,e)},children:Object(h.jsx)("div",{className:d()("productPage__details__specs__buttons__favorite__icon","icon",{favoriteSelected:J,favorite:!J})})})]}),Object(h.jsxs)("ul",{className:"productPage__details__specs__block",children:[Object(h.jsxs)("li",{className:" productPage__details__specs__block__item secondary-color",children:["Screen",Object(h.jsx)("span",{className:"primary-color",children:null===O||void 0===O?void 0:O.screen})]}),Object(h.jsxs)("li",{className:" productPage__details__specs__block__item secondary-color",children:["Resolution",Object(h.jsx)("span",{className:"primary-color",children:null===O||void 0===O?void 0:O.resolution})]}),Object(h.jsxs)("li",{className:" productPage__details__specs__block__item secondary-color",children:["Processor",Object(h.jsx)("span",{className:"primary-color",children:null===O||void 0===O?void 0:O.processor})]}),Object(h.jsxs)("li",{className:"productPage__details__specs__block__item secondary-color",children:["RAM",Object(h.jsx)("span",{className:"primary-color",children:null===O||void 0===O?void 0:O.ram})]})]})]}),Object(h.jsxs)("div",{className:"productPage__details__about",children:[Object(h.jsx)("div",{className:" productPage__details__about__title h2 bold primary-color",children:"About"}),null===O||void 0===O?void 0:O.description.map((function(e){return Object(h.jsxs)("div",{className:"productPage__details__about__block",children:[Object(h.jsx)("div",{className:" productPage__details__about__block__subtitle h3 medium primary-color",children:e.title}),Object(h.jsxs)("div",{className:" productPage__details__about__block__description body-text normal secondary-color",children:[Object(h.jsx)("p",{className:"body-text",children:e.text[0]}),Object(h.jsx)("p",{className:"body-text",children:e.text[1]})]})]})}))]}),Object(h.jsxs)("div",{className:"productPage__details__techSpecs",children:[Object(h.jsx)("div",{className:" productPage__details__techSpecs__title h2 bold primary color",children:"Tech specs"}),Object(h.jsxs)("ul",{className:"productPage__details__techSpecs__block",children:[Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Screen",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.screen})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Resolution",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.resolution})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Processor",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.processor})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["RAM",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.ram})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Built in memory",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.capacity})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Camera",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.camera})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text",children:["Zoom",Object(h.jsx)("span",{className:"primary-color body-text",children:null===O||void 0===O?void 0:O.zoom})]}),Object(h.jsxs)("li",{className:" productPage__details__techSpecs__block__item secondary-color body-text ",children:["Cell",Object(h.jsx)("span",{children:O.cell.map((function(e,t){return Object(h.jsx)("span",{className:"primary-color body-text",children:"".concat(e).concat(t===O.cell.length-1?"":", ")},e)}))})]})]})]})]})}),Object(h.jsx)(k,{products:L,name:"You may also like",isLoaded:M})]}):Object(h.jsx)(y,{})]})},U=function(){var e=Object(o.useContext)(x).setSelectedId,t=Object(l.r)().productId;return Object(o.useEffect)((function(){e(t)}),[]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(g,{}),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{path:"/",element:Object(h.jsx)(R,{})}),Object(h.jsx)(l.b,{path:"home",element:Object(h.jsx)(l.a,{to:"/"})}),Object(h.jsx)(l.b,{path:"/phones",element:Object(h.jsx)(K,{title:"Mobile phones",navTitle:"Phones",type:"phones"})}),Object(h.jsx)(l.b,{path:"/phones/:productId",element:Object(h.jsx)($,{})}),Object(h.jsx)(l.b,{path:"/cart",element:Object(h.jsx)(M,{})}),Object(h.jsx)(l.b,{path:"/favorites",element:Object(h.jsx)(Q,{})}),Object(h.jsx)(l.b,{path:"/tablets",element:Object(h.jsx)(K,{title:"Tablets",navTitle:"Tablets",type:"tablets"})}),Object(h.jsx)(l.b,{path:"/accessories",element:Object(h.jsx)(K,{title:"Accessories",navTitle:"Accessories",type:"accessories"})})]})}),Object(h.jsx)(f,{})]})};n.a.render(Object(h.jsx)(r.a,{children:Object(h.jsx)(v,{children:Object(h.jsx)(U,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b031ae30.chunk.js.map